<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flight Authorization - FFI UAS</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üöÅ</text></svg>">
    <script src="js/menu.js"></script>
</head>
<body>

<div class="container">
    <div style="display:flex; justify-content:space-between; align-items:center; border-bottom: 2px solid #eee; padding-bottom: 20px; margin-bottom: 30px; flex-wrap: wrap; gap: 20px;">
        <div>
            <h1>Flight Authorization Tool</h1>
            <span style="font-size: 1rem; color: #666;">Pre-flight Risk Assessment & Approval</span>
        </div>
        <div class="preset-container">
            <button class="preset-btn" onclick="loadScenario('jorgen')"><i class="fa-solid fa-triangle-exclamation" style="color:#dc3545"></i> Case J√∏rgen</button>
            <button class="preset-btn" onclick="loadScenario('hydrogen_safe')"><i class="fa-solid fa-check" style="color:#28a745"></i> J√∏rgen (Fixed)</button>
            <button class="preset-btn" onclick="loadScenario('demo_flight')"><i class="fa-solid fa-users" style="color:#007bff"></i> Demo Flight</button>
            <button class="preset-btn" onclick="loadScenario('standard')"><i class="fa-solid fa-paper-plane" style="color:#6c757d"></i> Standard</button>
        </div>
    </div>

    <div class="section">
        <div class="section-header" style="border-left: 5px solid #17a2b8;">
            <i class="fa-solid fa-microchip" style="color: white;"></i> <h2 style="font-size:1.1rem; color:white;">1. UAS System Configuration</h2>
        </div>
        <div class="grid-row">
            <div class="form-group">
                <label><i class="fa-solid fa-plane"></i> Drone Type</label>
                <select id="droneType">
                    <option value="multirotor">Multirotor</option>
                    <option value="fixed_prop">Fixed wing (propeller)</option>
                    <option value="fixed_jet">Fixed wing (jet)</option>
                    <option value="helicopter">Helicopter</option>
                    <option value="vtol">VTOL</option>
                </select>
            </div>
            <div class="form-group">
                <label><i class="fa-solid fa-scale-balanced"></i> Weight (MTOM)</label>
                <select id="weight">
                    <option value="sub250">Sub 250 g</option>
                    <option value="sub4">250 g - 4 kg</option>
                    <option value="sub25">4 kg - 25 kg</option>
                    <option value="sub150">25 kg - 150 kg</option>
                    <option value="over150">Over 150 kg</option>
                </select>
            </div>
        </div>
        <div class="grid-row">
            <div class="form-group">
                <label><i class="fa-solid fa-certificate"></i> Class / Status</label>
                <select id="classStatus">
                    <option value="c_class">C-Class (C0-C6)</option>
                    <option value="mass_produced">Legacy / Mass Produced</option>
                    <option value="experimental">Prototype / Experimental</option>
                </select>
            </div>
            <div class="form-group">
                <label><i class="fa-solid fa-battery-full"></i> Energy Source</label>
                <select id="energySource">
                    <option value="battery">Battery (LiPo/LiIon)</option>
                    <option value="fuel">Fossil Fuel</option>
                    <option value="hydrogen">Hydrogen / Fuel Cell</option>
                </select>
            </div>
        </div>
        <div class="grid-row">
            <div class="form-group">
                <label><i class="fa-solid fa-robot"></i> Autopilot</label>
                <select id="autopilot">
                    <option value="stabilized">Stabilization Assist / GPS</option>
                    <option value="manual">None / Full Manual</option>
                </select>
            </div>
            <div class="form-group">
                <label><i class="fa-solid fa-bomb"></i> Dangerous Goods</label>
                <select id="dangerousGoods">
                    <option value="no">None</option>
                    <option value="yes">Live weapons or munitions</option>
                    <option value="pyro">Pyrotechnics</option>
                </select>
            </div>
        </div>
    </div>

    <div class="section">
        <div class="section-header" style="border-left: 5px solid #ffc107;">
            <i class="fa-solid fa-location-dot" style="color: white;"></i> <h2 style="font-size:1.1rem; color:white;">2. Operational Profile</h2>
        </div>
        <div class="grid-row">
            <div class="form-group">
                <label>Purpose</label>
                <select id="purpose">
                    <option value="testing">Testing / Research</option>
                    <option value="demo">Demonstration for audience</option>
                    <option value="exercise">Part of exercise</option>
                    <option value="training">Pilot Training</option>
                </select>
            </div>
            <div class="form-group">
                <label>Area of Operation</label>
                <select id="area">
                    <option value="sparsely">Sparsely populated area</option>
                    <option value="populated">Populated area</option>
                    <option value="controlled_ground">Controlled ground area</option>
                    <option value="firing_range">Controlled firing range</option>
                </select>
            </div>
        </div>
        <div class="grid-row">
            <div class="form-group">
                <label>Airspace</label>
                <select id="airspace">
                    <option value="uncontrolled">Uncontrolled airspace (G)</option>
                    <option value="controlled">Controlled airspace (CTR/TMA)</option>
                    <option value="danger_area">Active Danger/Restricted Area</option>
                </select>
            </div>
            <div class="form-group">
                <label>Altitude</label>
                <select id="altitude">
                    <option value="below120">Below 120 m (400 ft)</option>
                    <option value="above120">Above 120 m</option>
                </select>
            </div>
        </div>
        <div class="grid-row">
            <div class="form-group">
                <label>Covered by Approved Risk Assessment?</label>
                <select id="riskAssessment">
                    <option value="no">No</option>
                    <option value="yes">Yes (Approved RA for this mission)</option>
                </select>
            </div>
            <div class="form-group">
                <label>Other Airspace Users</label>
                <select id="otherUsers">
                    <option value="none">None / Segregated</option>
                    <option value="low">Low probability</option>
                    <option value="high">High probability</option>
                </select>
            </div>
        </div>
    </div>

    <div class="section">
        <div class="section-header" style="border-left: 5px solid #28a745;">
            <i class="fa-solid fa-user-pilot" style="color: white;"></i> <h2 style="font-size:1.1rem; color:white;">3. Pilot Competency</h2>
        </div>
        
        <div class="grid-row">
            <div class="form-group">
                <label>EASA Competence Level</label>
                <select id="competence">
                    <option value="none">None / Expired</option>
                    <option value="a1a3">A1 / A3 (Open)</option>
                    <option value="a2">A2 (Open)</option>
                    <option value="sts">STS / Specific</option>
                </select>
            </div>
            <div class="form-group">
                <label>Recency (Time since last flight)</label>
                <select id="recency">
                    <option value="recent">Less than 30 days</option>
                    <option value="medium">30 - 90 days</option>
                    <option value="expired">Over 90 days</option>
                </select>
            </div>
        </div>

        <div style="padding: 15px; background: #fff; border-bottom: 1px solid #eee;">
            <label style="margin-bottom: 10px;">Mandatory FFI Requirements</label>
            <div class="checkbox-grid" style="grid-template-columns: 1fr;">
                <label class="checkbox-item" style="border-color: #b8daff; background-color: #e8f4fd;">
                    <input type="checkbox" id="ffiCourse"> 
                    <strong>FFI UAS Introduction Ground Course (Completed)</strong>
                </label>
            </div>
        </div>

        <div style="display: flex; flex-wrap: wrap;">
            <div style="flex: 1; min-width: 300px; border-right: 1px solid #eee;">
                <div style="padding: 10px 15px; background: #f8f9fa; font-weight: 700; font-size: 0.9rem; color: #555; border-bottom: 1px solid #eee;">
                    <i class="fa-solid fa-gamepad"></i> Drone System Ratings
                </div>
                <div class="checkbox-grid" style="grid-template-columns: 1fr;">
                    <label class="checkbox-item"><input type="checkbox" id="rate_multi"> Multirotor</label>
                    <label class="checkbox-item"><input type="checkbox" id="rate_fixed"> Fixed Wing</label>
                    <label class="checkbox-item"><input type="checkbox" id="rate_heli"> Helicopter</label>
                    <label class="checkbox-item"><input type="checkbox" id="rate_heavy"> Heavy Class (>25 kg)</label>
                </div>
            </div>

            <div style="flex: 1; min-width: 300px;">
                <div style="padding: 10px 15px; background: #f8f9fa; font-weight: 700; font-size: 0.9rem; color: #555; border-bottom: 1px solid #eee;">
                    <i class="fa-solid fa-id-badge"></i> Operational Authorizations
                </div>
                <div class="checkbox-grid" style="grid-template-columns: 1fr;">
                    <label class="checkbox-item"><input type="checkbox" id="rate_vlos" checked> VLOS (Visual Line of Sight)</label>
                    <label class="checkbox-item"><input type="checkbox" id="rate_bvlos"> BVLOS (Beyond Visual Line of Sight)</label>
                    <label class="checkbox-item"><input type="checkbox" id="rate_instructor"> Instructor</label>
                </div>
            </div>
        </div>

        <div style="padding: 15px; background: #fff; border-top: 1px solid #eee;">
            <label style="margin-bottom: 10px;"><i class="fa-solid fa-file-contract"></i> Qualified for Specific Risk Assessments</label>
            <div style="color:#666; font-size:0.85rem; margin-bottom:10px;">Check only if you have completed the read-in/training for the specific RA.</div>
            <div class="checkbox-grid">
                <label class="checkbox-item"><input type="checkbox" id="qual_heavy"> RA-002 (Heavy Lift)</label>
                <label class="checkbox-item"><input type="checkbox" id="qual_hydrogen"> RA-003 (Hydrogen)</label>
                <label class="checkbox-item"><input type="checkbox" id="qual_demo"> RA-005 (Display/Demo)</label>
            </div>
        </div>

    </div>
</div>

<div id="result-box" class="res-gray">
    <span class="result-icon"><i class="fa-solid fa-spinner"></i></span>
    <span class="result-title">AWAITING INPUT</span>
    <span class="result-desc">Please fill out all sections.</span>
    <div class="warning-list" id="warningList"></div>
</div>

<script src="js/auth-logic.js"></script>
</body>
</html>